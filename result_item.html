<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Page</title>
    <link rel="stylesheet" href="css/result_item.css">
</head>
<body>
    <!-- Dynamic Back Link -->
    <a id="back-to-search" href="#" class="back-link">Back to Search Results</a>
    
    <h1 id="company-name">SRJ, Inc. - <span id="dynamic-make">Loading...</span></h1>
    
    <div class="main-content">
        <!-- Sidebar: List of sizes -->
        <div class="sidebar">
            <h2>Other Sizes</h2>
            <ul id="size-list">
                <!-- Dynamically populated size list -->
                <li>Loading...</li>
            </ul>
        </div>

        <!-- Main Product Section -->
        <div class="product-section">
            <!-- Product Image -->
            <div class="product-img">Product Image</div>
            
            <!-- Product Details -->
            <div class="product-details">
                <h2 class="product-title">
                    <span id="dynamic-model">Model Loading...</span> - 
                    <span id="dynamic-size">Size Loading...</span>
                </h2>
                <p class="short-description" id="dynamic-description">Short description is loading...</p>
                <div class="product-thumbnails">
                    <img src="thumb1.jpg" alt="Thumbnail 1">
                    <img src="thumb2.jpg" alt="Thumbnail 2">
                    <img src="thumb3.jpg" alt="Thumbnail 3">
                </div>
                <button id="addQuoteButton">Add to Quote</button>
            </div>
        </div>
    </div>
    
    <!-- More Details -->
    <div class="more-details">
        <h2>Detailed Product Description</h2>
        <p id="dynamic-details">
            Detailed product description is loading...
        </p>
    </div>
    
    <script>
        // JavaScript to dynamically update the page content and back link
        document.addEventListener("DOMContentLoaded", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const make = urlParams.get('make');
            const model = urlParams.get('model');
            const size = urlParams.get('size');
            const sizes = urlParams.get('sizes') ? urlParams.get('sizes').split(',') : [];

            // Update placeholders with dynamic data
            document.getElementById("dynamic-make").innerText = make || "Unknown Make";
            document.getElementById("dynamic-model").innerText = model || "Unknown Model";
            document.getElementById("dynamic-size").innerText = size || "Unknown Size";
            document.getElementById("dynamic-description").innerText = 
                `Short description of the ${make || "Make"} ${model || "Model"} (${size || "Size"}) goes here.`;
            document.getElementById("dynamic-details").innerText = 
                `Need all detailed description of the ${make || "Make"} ${model || "Model"} (${size || "Size"}). Include specifications, features, and other relevant information about the item.`;

            // Populate size list in the sidebar
            const sizeList = document.getElementById("size-list");
            sizeList.innerHTML = ""; // Clear the list
            sizes.forEach((sizeItem) => {
                const listItem = document.createElement("li");
                listItem.innerText = decodeURIComponent(sizeItem);
                listItem.addEventListener("click", () => {
                    // Redirect to the same page with the selected size
                    const url = `result_item.html?make=${encodeURIComponent(make)}&model=${encodeURIComponent(model)}&size=${encodeURIComponent(sizeItem)}&sizes=${sizes.join(',')}`;
                    window.location.href = url;
                });
                sizeList.appendChild(listItem);
            });

            // Update the "Back to Search Results" link
            const backToSearch = document.getElementById("back-to-search");
            if (make && model) {
                backToSearch.href = `search_result.html?make=${encodeURIComponent(make)}&model=${encodeURIComponent(model)}`;
            } else {
                backToSearch.href = "search_result.html";
            }
        });
    </script>
</body>
</html>
